{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Windows\\\\Desktop\\\\ADAPV_frontend\\\\src\\\\Telas\\\\CadastroDenuncia.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { Footer } from \"../components/Footer.jsx\";\nimport { Cabecalho } from \"../components/Cabecalho.jsx\";\nimport { TabelaDenuncia } from \"../components/TabelaDenuncia.jsx\";\nimport { FormDenuncia } from \"../formularios/FormDenuncia\";\nimport \"./CadastroDenuncia.css\";\nimport { urLBase } from \"../api/index.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CadastroDenuncia(props) {\n  _s();\n  const [exibirTabela, setExibirTabela] = useState(true);\n  const [denuncia, setDenuncia] = useState(props.denuncia);\n  const [modoEdicao, setModoEdicao] = useState(false);\n  const [atualizando, setAtualizando] = useState(false);\n  const [denunciaEmEdicao, setDenunciaEmEdicao] = useState({\n    id: \"\",\n    rua: \"\",\n    numero: \"\",\n    cep: \"\",\n    cidade: \"\",\n    data: \"\",\n    observacoes: \"\",\n    telefone: \"\"\n  });\n  function prepararParaAtualizar(denuncia) {\n    setAtualizando(true);\n    setDenunciaEmEdicao(denuncia);\n    setExibirTabela(false);\n  }\n  function apagarDenuncia(denuncia) {\n    fetch(urLBase + \"/denuncias\", {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(denuncia)\n    }).then(resposta => resposta.json()).then(dados => {\n      window.alert(dados.mensagem);\n      //Fazendo um novo Get para atualizar a tabela após exclusão\n      fetch(urLBase + \"/denuncias\", {\n        method: \"GET\"\n      }).then(resposta => {\n        return resposta.json();\n      }).then(dados => {\n        const aux = setDenuncia(dados);\n        const listaAtualizada = aux.filter(item => item.id !== denuncia.id);\n        props.setDenuncia(listaAtualizada);\n      });\n    }).catch(erro => {\n      window.alert(\"Erro ao executar exclusão de denuncia:\" + erro.message);\n    });\n  }\n\n  //Recebendo os Dados do banco de dados\n  useEffect(() => {\n    fetch(urLBase + \"/denuncias\", {\n      method: \"GET\"\n    }).then(resposta => {\n      return resposta.json();\n    }).then(dados => {\n      if (Array.isArray(dados)) {\n        setDenuncia(dados);\n      } else {}\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page_container_denuncia\",\n    children: [/*#__PURE__*/_jsxDEV(Cabecalho, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"conteudo_denuncia\",\n      children: exibirTabela ? /*#__PURE__*/_jsxDEV(TabelaDenuncia, {\n        listadedenuncias: denuncia,\n        setDenuncia: setDenuncia,\n        exibirTabela: setExibirTabela,\n        editarDenuncia: prepararParaAtualizar,\n        excluirDenuncia: apagarDenuncia,\n        setDenunciaEmEdicao: setDenunciaEmEdicao,\n        setAtualizando: setAtualizando\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(FormDenuncia, {\n        listadedenuncias: denuncia,\n        setDenuncia: setDenuncia,\n        exibirTabela: setExibirTabela\n        // denunciaEdicao={denunciaEmEdicao}\n        ,\n        denuncia: denunciaEmEdicao\n        // atualizando={atualizando}\n        ,\n        modoEdicao: atualizando,\n        setModoEdicao: setModoEdicao\n        // excluirDenuncia={apagarDenuncia}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(CadastroDenuncia, \"uaO2Ia8hqPfoLx0SlWwBVDzos+g=\");\n_c = CadastroDenuncia;\nvar _c;\n$RefreshReg$(_c, \"CadastroDenuncia\");","map":{"version":3,"names":["useState","useEffect","Footer","Cabecalho","TabelaDenuncia","FormDenuncia","urLBase","jsxDEV","_jsxDEV","CadastroDenuncia","props","_s","exibirTabela","setExibirTabela","denuncia","setDenuncia","modoEdicao","setModoEdicao","atualizando","setAtualizando","denunciaEmEdicao","setDenunciaEmEdicao","id","rua","numero","cep","cidade","data","observacoes","telefone","prepararParaAtualizar","apagarDenuncia","fetch","method","headers","body","JSON","stringify","then","resposta","json","dados","window","alert","mensagem","aux","listaAtualizada","filter","item","catch","erro","message","Array","isArray","className","children","fileName","_jsxFileName","lineNumber","columnNumber","listadedenuncias","editarDenuncia","excluirDenuncia","_c","$RefreshReg$"],"sources":["C:/Users/Windows/Desktop/ADAPV_frontend/src/Telas/CadastroDenuncia.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Footer } from \"../components/Footer.jsx\";\r\nimport { Cabecalho } from \"../components/Cabecalho.jsx\";\r\nimport { TabelaDenuncia } from \"../components/TabelaDenuncia.jsx\";\r\nimport { FormDenuncia } from \"../formularios/FormDenuncia\";\r\nimport \"./CadastroDenuncia.css\";\r\nimport { urLBase } from \"../api/index.js\"; \r\n\r\nexport function CadastroDenuncia(props) {\r\n  const [exibirTabela, setExibirTabela] = useState(true);\r\n  const [denuncia, setDenuncia] = useState(props.denuncia);\r\n  const [modoEdicao, setModoEdicao] = useState(false);\r\n  const [atualizando, setAtualizando] = useState(false);\r\n  const [denunciaEmEdicao, setDenunciaEmEdicao] = useState({\r\n    id: \"\",\r\n    rua: \"\",\r\n    numero: \"\",\r\n    cep: \"\",\r\n    cidade: \"\",\r\n    data:\"\",\r\n    observacoes: \"\",\r\n    telefone: \"\"\r\n  });\r\n\r\n  function prepararParaAtualizar(denuncia) {\r\n    setAtualizando(true);\r\n    setDenunciaEmEdicao(denuncia);\r\n    setExibirTabela(false);\r\n  }\r\n\r\n  function apagarDenuncia(denuncia) {\r\n    fetch(urLBase + \"/denuncias\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(denuncia)\r\n    }).then((resposta) => resposta.json()\r\n    ).then((dados) => {\r\n      window.alert(dados.mensagem);\r\n      //Fazendo um novo Get para atualizar a tabela após exclusão\r\n      fetch(urLBase + \"/denuncias\", {\r\n        method: \"GET\"\r\n      }).then((resposta) => {\r\n        return resposta.json();\r\n      }).then((dados) => {\r\n        const aux = setDenuncia(dados)\r\n        const listaAtualizada = aux.filter((item) => item.id !== denuncia.id);\r\n      props.setDenuncia(listaAtualizada);})\r\n    }).catch((erro) => {\r\n      window.alert(\"Erro ao executar exclusão de denuncia:\" + erro.message);\r\n    });\r\n  }\r\n\r\n  //Recebendo os Dados do banco de dados\r\n  useEffect(() => {\r\n    fetch(urLBase + \"/denuncias\", {\r\n      method: \"GET\"\r\n    }).then((resposta) => {\r\n      return resposta.json();\r\n    }).then((dados) => {\r\n      if (Array.isArray(dados)) {\r\n        setDenuncia(dados);\r\n      }\r\n      else {\r\n\r\n      }\r\n    })\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"page_container_denuncia\">\r\n      <Cabecalho />\r\n\r\n      <main className=\"conteudo_denuncia\">\r\n        {exibirTabela ? (\r\n          <TabelaDenuncia\r\n            listadedenuncias={denuncia}\r\n            setDenuncia={setDenuncia}\r\n            exibirTabela={setExibirTabela}\r\n            editarDenuncia={prepararParaAtualizar}\r\n            excluirDenuncia={apagarDenuncia}\r\n            setDenunciaEmEdicao={setDenunciaEmEdicao}\r\n            setAtualizando={setAtualizando}\r\n          />\r\n        ) : (\r\n          <FormDenuncia\r\n            listadedenuncias={denuncia}\r\n            setDenuncia={setDenuncia}\r\n            exibirTabela={setExibirTabela}\r\n            // denunciaEdicao={denunciaEmEdicao}\r\n            denuncia={denunciaEmEdicao}\r\n            // atualizando={atualizando}\r\n            modoEdicao={atualizando}\r\n            setModoEdicao={setModoEdicao}\r\n          // excluirDenuncia={apagarDenuncia}\r\n          />\r\n        )}\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}