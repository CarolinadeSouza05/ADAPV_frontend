{"ast":null,"code":"import _slicedToArray from\"C:/Users/Windows/Desktop/ADAPV_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Footer}from\"../components/Footer.jsx\";import{Cabecalho}from\"../components/Cabecalho.jsx\";import{TabelaDenuncia}from\"../components/TabelaDenuncia.jsx\";import{FormDenuncia}from\"../formularios/FormDenuncia\";import\"./CadastroDenuncia.css\";import{urLBase}from\"../api/index.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function CadastroDenuncia(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),exibirTabela=_useState2[0],setExibirTabela=_useState2[1];var _useState3=useState(props.denuncia),_useState4=_slicedToArray(_useState3,2),denuncia=_useState4[0],setDenuncia=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modoEdicao=_useState6[0],setModoEdicao=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),atualizando=_useState8[0],setAtualizando=_useState8[1];var _useState9=useState({id:\"\",rua:\"\",numero:\"\",cep:\"\",cidade:\"\",data:\"\",observacoes:\"\",telefone:\"\"}),_useState10=_slicedToArray(_useState9,2),denunciaEmEdicao=_useState10[0],setDenunciaEmEdicao=_useState10[1];function prepararParaAtualizar(denuncia){setAtualizando(true);setDenunciaEmEdicao(denuncia);setExibirTabela(false);}function apagarDenuncia(denuncia){fetch(urLBase+\"/denuncias\",{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(denuncia)}).then(function(resposta){return resposta.json();}).then(function(dados){window.alert(dados.mensagem);//Fazendo um novo Get para atualizar a tabela após exclusão\nfetch(urLBase+\"/denuncias\",{method:\"GET\"}).then(function(resposta){return resposta.json();}).then(function(dados){var aux=setDenuncia(dados);var listaAtualizada=aux.filter(function(item){return item.id!==denuncia.id;});props.setDenuncia(listaAtualizada);});}).catch(function(erro){window.alert(\"Erro ao executar exclusão de denuncia:\"+erro.message);});}//Recebendo os Dados do banco de dados\nuseEffect(function(){fetch(urLBase+\"/denuncias\",{method:\"GET\"}).then(function(resposta){return resposta.json();}).then(function(dados){if(Array.isArray(dados)){setDenuncia(dados);}else{}});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page_container_denuncia\",children:[/*#__PURE__*/_jsx(Cabecalho,{}),/*#__PURE__*/_jsx(\"main\",{className:\"conteudo_denuncia\",children:exibirTabela?/*#__PURE__*/_jsx(TabelaDenuncia,{listadedenuncias:denuncia,setDenuncia:setDenuncia,exibirTabela:setExibirTabela,editarDenuncia:prepararParaAtualizar,excluirDenuncia:apagarDenuncia,setDenunciaEmEdicao:setDenunciaEmEdicao,setAtualizando:setAtualizando}):/*#__PURE__*/_jsx(FormDenuncia,{listadedenuncias:denuncia,setDenuncia:setDenuncia,exibirTabela:setExibirTabela// denunciaEdicao={denunciaEmEdicao}\n,denuncia:denunciaEmEdicao// atualizando={atualizando}\n,modoEdicao:atualizando,setModoEdicao:setModoEdicao// excluirDenuncia={apagarDenuncia}\n})}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["useState","useEffect","Footer","Cabecalho","TabelaDenuncia","FormDenuncia","urLBase","jsx","_jsx","jsxs","_jsxs","CadastroDenuncia","props","_useState","_useState2","_slicedToArray","exibirTabela","setExibirTabela","_useState3","denuncia","_useState4","setDenuncia","_useState5","_useState6","modoEdicao","setModoEdicao","_useState7","_useState8","atualizando","setAtualizando","_useState9","id","rua","numero","cep","cidade","data","observacoes","telefone","_useState10","denunciaEmEdicao","setDenunciaEmEdicao","prepararParaAtualizar","apagarDenuncia","fetch","method","headers","body","JSON","stringify","then","resposta","json","dados","window","alert","mensagem","aux","listaAtualizada","filter","item","catch","erro","message","Array","isArray","className","children","listadedenuncias","editarDenuncia","excluirDenuncia"],"sources":["C:/Users/Windows/Desktop/ADAPV_frontend/src/Telas/CadastroDenuncia.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Footer } from \"../components/Footer.jsx\";\r\nimport { Cabecalho } from \"../components/Cabecalho.jsx\";\r\nimport { TabelaDenuncia } from \"../components/TabelaDenuncia.jsx\";\r\nimport { FormDenuncia } from \"../formularios/FormDenuncia\";\r\nimport \"./CadastroDenuncia.css\";\r\nimport { urLBase } from \"../api/index.js\"; \r\n\r\nexport function CadastroDenuncia(props) {\r\n  const [exibirTabela, setExibirTabela] = useState(true);\r\n  const [denuncia, setDenuncia] = useState(props.denuncia);\r\n  const [modoEdicao, setModoEdicao] = useState(false);\r\n  const [atualizando, setAtualizando] = useState(false);\r\n  const [denunciaEmEdicao, setDenunciaEmEdicao] = useState({\r\n    id: \"\",\r\n    rua: \"\",\r\n    numero: \"\",\r\n    cep: \"\",\r\n    cidade: \"\",\r\n    data:\"\",\r\n    observacoes: \"\",\r\n    telefone: \"\"\r\n  });\r\n\r\n  function prepararParaAtualizar(denuncia) {\r\n    setAtualizando(true);\r\n    setDenunciaEmEdicao(denuncia);\r\n    setExibirTabela(false);\r\n  }\r\n\r\n  function apagarDenuncia(denuncia) {\r\n    fetch(urLBase + \"/denuncias\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(denuncia)\r\n    }).then((resposta) => resposta.json()\r\n    ).then((dados) => {\r\n      window.alert(dados.mensagem);\r\n      //Fazendo um novo Get para atualizar a tabela após exclusão\r\n      fetch(urLBase + \"/denuncias\", {\r\n        method: \"GET\"\r\n      }).then((resposta) => {\r\n        return resposta.json();\r\n      }).then((dados) => {\r\n        const aux = setDenuncia(dados)\r\n        const listaAtualizada = aux.filter((item) => item.id !== denuncia.id);\r\n      props.setDenuncia(listaAtualizada);})\r\n    }).catch((erro) => {\r\n      window.alert(\"Erro ao executar exclusão de denuncia:\" + erro.message);\r\n    });\r\n  }\r\n\r\n  //Recebendo os Dados do banco de dados\r\n  useEffect(() => {\r\n    fetch(urLBase + \"/denuncias\", {\r\n      method: \"GET\"\r\n    }).then((resposta) => {\r\n      return resposta.json();\r\n    }).then((dados) => {\r\n      if (Array.isArray(dados)) {\r\n        setDenuncia(dados);\r\n      }\r\n      else {\r\n\r\n      }\r\n    })\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"page_container_denuncia\">\r\n      <Cabecalho />\r\n\r\n      <main className=\"conteudo_denuncia\">\r\n        {exibirTabela ? (\r\n          <TabelaDenuncia\r\n            listadedenuncias={denuncia}\r\n            setDenuncia={setDenuncia}\r\n            exibirTabela={setExibirTabela}\r\n            editarDenuncia={prepararParaAtualizar}\r\n            excluirDenuncia={apagarDenuncia}\r\n            setDenunciaEmEdicao={setDenunciaEmEdicao}\r\n            setAtualizando={setAtualizando}\r\n          />\r\n        ) : (\r\n          <FormDenuncia\r\n            listadedenuncias={denuncia}\r\n            setDenuncia={setDenuncia}\r\n            exibirTabela={setExibirTabela}\r\n            // denunciaEdicao={denunciaEmEdicao}\r\n            denuncia={denunciaEmEdicao}\r\n            // atualizando={atualizando}\r\n            modoEdicao={atualizando}\r\n            setModoEdicao={setModoEdicao}\r\n          // excluirDenuncia={apagarDenuncia}\r\n          />\r\n        )}\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}